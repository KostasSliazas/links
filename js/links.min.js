!function(){const checkboxes=document.getElementById("check-boxes"),selection=document.getElementById("select"),choise=document.getElementById("choises"),createLink=document.getElementById("create-link"),outpus=document.getElementById("outpus"),closeEx=document.getElementById("exit"),closeBtn=document.getElementById("exit1"),opensBtn=document.getElementById("open"),adition=document.getElementById("aditions"),search=document.getElementById("site-search"),copyAll=document.getElementById("copy-links"),showExport=document.getElementById("export-div"),links=document.getElementById("links"),found=document.getElementById("founded"),docfrag=document.createDocumentFragment(),checkeds=document.getElementsByName("check")[0],classSwich=()=>{checkeds.checked?outpus.classList.add("checks"):outpus.classList.remove("checks")};function showCheckboxes(e){if(addTextOfChecked(),"select"!==e.target.id||selection.classList.contains("open")){if("LABEL"===e.target.tagName||"INPUT"===e.target.tagName)return;selection.classList.remove("open"),checkboxes.style.display="none"}else selection.classList.add("open"),checkboxes.style.display="block"}function loopOverInputs(){let checked=[];return[...checkboxes.getElementsByTagName("INPUT")].forEach(e=>{e.checked&&checked.push(e.value)}),checked}function addTextOfChecked(){choise.innerHTML=loopOverInputs().join(", ")}function hide(e){e.style.display="none"===e.style.display?"block":"none"}function setLinks(){const url=document.getElementById("urls").value;if(url.length>2){const fav=extractHostname(url),createLinkObject={text:adition.value,url:fav,full:url,type:loopOverInputs()};return createLinkObject}return!1}function addStorage(){if("localStorage"in window){if(setLinks()){var key=setLinks().url,data=JSON.stringify(setLinks());localStorage.setItem(key,data)}}else alert("no localStorage in window")}function extractHostname(url){var hostname;return hostname=(hostname=(hostname=url.indexOf("//")>-1?url.split("/")[2]:url.split("/")[0]).split(":")[0]).split("?")[0]}function loopLocalStorage(){0===localStorage.length&&(outpus.innerHTML="No links added...");for(var i=0;i<localStorage.length;i++){let{url:url,type:type,full:full,text:text}=JSON.parse(localStorage.getItem(localStorage.key(i)));createElem(url,type,text,full)}outpus.appendChild(docfrag),found.innerHTML=localStorage.length}function loopLocalStorageSearch(){outpus.innerHTML="";let count=0;for(let i=0;i<localStorage.length;i++){let{url:url,type:type,full:full,text:text}=JSON.parse(localStorage.getItem(localStorage.key(i))),dats=url;type.concat(text.split(),url.split()).forEach(e=>{e.toLowerCase().includes(search.value.toLowerCase())&&dats===url&&(createElem(url,type,text,full),count++,dats="")})}outpus.appendChild(docfrag),0===count?outpus.innerHTML="No results... :"+count:found.innerHTML=count}function removeThis(){var o;return confirm("Are you sure you want to remove?")&&(localStorage.removeItem(this.firstChild.textContent),outpus.innerHTML="",loopLocalStorage()),!1}function createElem(url,type,text,full){let elems=document.createElement("a"),types=document.createElement("span"),texts=document.createElement("span"),urls=document.createElement("span"),close=document.createElement("span");close.className="close",close.innerHTML="Ã—",close.onclick=removeThis.bind(elems),elems.setAttribute("href",full),elems.setAttribute("target","_blank"),types.textContent=type,urls.textContent=url,texts.textContent=text,urls.className="urls",elems.appendChild(urls),elems.appendChild(texts),elems.appendChild(types),elems.appendChild(close),docfrag.appendChild(elems)}checkeds.checked=!1,checkeds.addEventListener("input",classSwich),search.addEventListener("keydown",e=>{"Enter"===event.key&&event.target.value.length>2?(event.preventDefault(),loopLocalStorageSearch()):"Backspace"===event.key&&0===event.target.value.length&&(outpus.innerHTML="",found.innerHTML="",loopLocalStorage())}),search.addEventListener("input",e=>{event.target.value.length>2&&loopLocalStorageSearch()}),copyAll.addEventListener("click",e=>{const data=document.getElementById("export");hide(showExport),data.value.length>0||(data.value="var data = JSON.parse("+JSON.stringify(JSON.stringify(localStorage))+");Object.keys(data).forEach(function (k) {localStorage.setItem(k, data[k]);});")}),createLink.addEventListener("click",()=>{addStorage(),outpus.innerHTML="",loopLocalStorage()}),document.addEventListener("click",showCheckboxes),closeEx.addEventListener("click",()=>hide(showExport)),closeBtn.addEventListener("click",()=>hide(links)),opensBtn.addEventListener("click",()=>hide(links)),addTextOfChecked(),loopLocalStorage(),search.focus()}();